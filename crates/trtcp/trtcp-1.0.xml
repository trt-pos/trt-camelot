<protocol byte-order="big-endian" version="1.0">
    <requests>
        <head>
            <field name="version" type="i32" />
            <field name="patch" type="i32" />
            <field name="caller" type="string" />
        </head>
        <unit-separator value="0x1F"/>
        <action>
            <field name="action" type="i32" >
                <value name="query" value="1" >
                    <requires-body value="yes" />
                    <description>
                        Query the database using the queries in the body
                    </description>
                </value>
                <value name="listen" value="2" >
                    <requires-body value="no"/>
                    <description>
                        Subscribe a listener to the designed id
                    </description>
                </value>
                <value name="call" value="3" >
                    <requires-body value="yes"/>
                    <description>
                        Invoke all the listeners subscribed to the id. The body content is the data to be sent to the listeners
                    </description>
                </value>
                <!-- Not sure about this -->
                <value name="transaction" value="4" >
                    <requires-body value="yes" />
                    <description>
                        Execute multiple SQL as a transaction in the database. Any error will be reported and the transaction
                        will be rolled back
                    </description>
                </value>
            </field>

            <field name="module:id" type="string" optional="true">
                <description>
                    The module and id of the action
                    Ex.: plugin-cash-register:orderModified
                </description>
            </field>
        </action>
        <unit-separator value="0x1F"/>
        <body>
            <field name="action-data" type="json-string" />
        </body>
    </requests>
    <responses>

    </responses>
    <status-code type="i8">
        <code name="OK" value="0" />
        <code name="ERROR" value="-1" >
        </code>
    </status-code>
</protocol>

